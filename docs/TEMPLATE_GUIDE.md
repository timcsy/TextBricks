# TextBricks 模板撰寫指南

本文件提供詳細的模板創建和管理指南，幫助教師、開發者和貢獻者為 TextBricks 創建高品質的程式碼模板。

## 目錄

- [模板基本結構](#模板基本結構)
- [模板創建方法](#模板創建方法)
  - [使用 Template Manager](#使用-template-manager)
  - [JSON 批次匯入](#json-批次匯入)
  - [直接編輯 JSON 檔案](#直接編輯-json-檔案)
- [語言特定指南](#語言特定指南)
  - [C 語言模板](#c-語言模板)
  - [Python 模板](#python-模板)
  - [JavaScript 模板](#javascript-模板)
- [模板撰寫最佳實踐](#模板撰寫最佳實踐)
- [分類和難度設定](#分類和難度設定)
- [模板驗證和測試](#模板驗證和測試)
- [常見問題](#常見問題)

## 模板基本結構

每個模板都必須包含以下欄位：

```json
{
  "id": "unique-template-id",
  "title": "模板顯示名稱",
  "description": "簡短的模板描述",
  "code": "實際的程式碼內容",
  "language": "程式語言",
  "categoryId": "難度分類"
}
```

### 欄位詳細說明

| 欄位 | 類型 | 必需 | 說明 |
|------|------|------|------|
| `id` | string | ✅ | 唯一識別符，使用 kebab-case 格式 |
| `title` | string | ✅ | 模板的顯示名稱，簡潔明確 |
| `description` | string | ✅ | 模板的用途和功能說明 |
| `code` | string | ✅ | 實際的程式碼內容 |
| `language` | string | ✅ | 程式語言 ID（如：`c`、`python`、`javascript`） |
| `categoryId` | string | ✅ | 難度分類：`level1`（基礎）、`level2`（控制）、`level3`（進階）、`level4`（專家） |

## 模板創建方法

### 使用 Template Manager

**推薦方法** - Template Manager 提供直觀的圖形化介面：

1. **開啟 Template Manager**
   - 使用命令面板：`Ctrl+Shift+P` > `TextBricks: Open Template Manager`
   - 或點擊 TextBricks 面板標題列的設定圖示

2. **創建新模板**
   - 點擊 "新增模板" 按鈕
   - 填寫所有必需欄位
   - 預覽程式碼效果
   - 點擊 "新增" 儲存

3. **優點**
   - 即時驗證輸入資料
   - 視覺化程式碼預覽
   - 自動生成唯一 ID
   - 錯誤提示和修正建議

### JSON 批次匯入

適合大量創建模板：

1. **準備 JSON 陣列格式**
```json
[
  {
    "title": "變數宣告範例",
    "description": "展示基本變數宣告語法",
    "code": "int number = 42;\nchar letter = 'A';",
    "language": "c",
    "categoryId": "level1"
  },
  {
    "title": "函數定義",
    "description": "基本函數定義和呼叫",
    "code": "def greet(name):\n    return f\"Hello, {name}!\"",
    "language": "python",
    "categoryId": "level3"
  }
]
```

2. **使用批次匯入功能**
   - 開啟 Template Manager
   - 點擊 "JSON 批次匯入"
   - 貼上 JSON 內容
   - 點擊 "匯入" 進行批次新增

3. **注意事項**
   - JSON 格式必須正確
   - 自動生成 ID（基於 title）
   - 驗證失敗的模板會被跳過
   - 顯示匯入結果摘要

### 直接編輯 JSON 檔案

**僅限開發環境** - 直接修改 `src/data/templates.json`：

1. 找到對應的語言和分類區塊
2. 添加新模板物件
3. 確保 ID 唯一性
4. 重新編譯擴展：`npm run compile`

## 語言指南和最佳實踐

### 通用原則

**不同語言特性**：
- **編譯型語言**（C、Rust、Go）：注重型別安全、記憶體管理
- **直譯型語言**（Python、Ruby）：強調可讀性、快速原型開發
- **多範式語言**（JavaScript、Kotlin）：展示多種程式設計風格
- **函數式語言**（Haskell、F#）：焦點於不可變性、函數組合

**模板設計原則**：
- **語言特色**：展示該語言的獨特優勢和最佳實踐
- **產業慣用**：遵循該語言社群的編碼風格和慣例
- **實用導向**：提供可在真實專案中使用的範例
- **步驟學習**：從簡單到複雜，逐步建立概念

### 主流語言示例

**系統程式語言**（C、Rust、Go）：
```c
#include <stdio.h>

int main() {
    // 清楚的程式結構
    // 資源管理明確
    return 0;
}
```

**高階腳本語言**（Python、Ruby）：
```python
def example_function():
    """清楚的文檔字串"""
    # 簡潔直觀的實現
    pass
```

**現代多用途語言**（JavaScript、TypeScript）：
```javascript
// 現代語法特性
const exampleFunction = (param) => {
    // 清楚的應用場景
    return result;
};
```

### 新增語言指南

**添加新語言時請考慮**：

1. **語言特性分析**
   - 語法風格和範式
   - 主要應用場景
   - 社群最佳實踐

2. **分類對應**
   - 基礎語法：變數、輸出、基本運算
   - 控制結構：條件、迴圈、分支
   - 資料與函數：函數定義、集合類型、模組化
   - 進階特性：物件導向、異常處理、併發程式設計

3. **模板品質標準**
   - 程式碼可執行且正確
   - 符合語言慣例和風格
   - 包含適當註解和說明
   - 展示實際應用價值

## 模板撰寫最佳實踐

### 1. 程式碼品質

- **可執行性**：確保程式碼能夠正常執行
- **完整性**：包含必要的導入和依賴
- **正確性**：語法正確，邏輯清晰
- **安全性**：避免不安全的程式碼模式

### 2. 教學有效性

- **漸進式學習**：從簡單到複雜
- **核心概念**：專注於重要概念
- **實用性**：提供實際應用場景
- **可擴展性**：便於學生修改和擴展

### 3. 可讀性和維護性

- **清晰的命名**：使用有意義的變數和函數名
- **適當註解**：解釋重要概念和複雜邏輯
- **一致的格式**：遵循語言的編碼規範
- **簡潔明確**：避免不必要的複雜性

### 4. 多語言一致性和擴展性

- **概念對應**：相同程式設計概念在不同語言中保持一致性
- **難度平衡**：相同分類的模板在不同語言中難度相當
- **功能等價**：提供特定任務的多語言實現方案
- **特性展示**：允許每種語言展示其獨特優勢和特性

## 分類和難度設定

### 基礎語法 (level1)
**目標**：讓學生熟悉語言基本語法和開發環境

**包含內容**：
- Hello World 程式
- 基本資料型別和變數宣告
- 簡單的輸入輸出操作
- 基本運算符號

**模板特徵**：
- 程式碼簡潔明瞭（通常 < 10 行）
- 不涉及複雜邏輯
- 專注單一概念
- 提供直接可執行的完整程式

### 控制結構 (level2)
**目標**：掌握程式流程控制

**包含內容**：
- 條件判斷（if/else）
- 迴圈結構（for/while）
- 分支結構（switch/match）
- 邏輯運算子

**模板特徵**：
- 中等複雜度（通常 10-20 行）
- 展示控制流程
- 包含實際應用場景
- 可修改參數進行練習

### 函數與資料結構 (level3)
**目標**：學會函數設計和資料組織

**包含內容**：
- 函數定義和呼叫
- 陣列/列表操作
- 參數傳遞和回傳值
- 基本資料結構

**模板特徵**：
- 較高複雜度（通常 20-40 行）
- 模組化設計
- 展示函數複用
- 包含多個相關概念

### 進階概念 (level4)
**目標**：掌握高級程式設計技巧

**包含內容**：
- 物件導向程式設計
- 錯誤處理和異常
- 檔案和網路操作
- 進階資料結構和演算法

**模板特徵**：
- 複雜實作（通常 > 40 行）
- 完整的程式架構
- 實際應用導向
- 展示最佳實踐

## 模板驗證和測試

### 自動驗證

Template Manager 會自動驗證：
- ✅ JSON 格式正確性
- ✅ 必需欄位完整性
- ✅ ID 唯一性
- ✅ 支援的語言和分類
- ✅ 程式碼長度合理性

### 手動測試

創建模板後請測試：

1. **功能測試**
   - 在目標語言環境中執行程式碼
   - 確認輸出結果正確
   - 測試邊界情況和錯誤處理

2. **易用性測試**
   - 從 TextBricks 面板複製模板
   - 拖曳到編輯器中
   - 確認格式和縮排正確

3. **教學效果測試**
   - 讓初學者嘗試使用
   - 收集反饋和建議
   - 根據需要調整難度和說明

## 常見問題

### Q: 如何處理多行程式碼？
A: 在 JSON 中使用 `\n` 表示換行：
```json
{
  "code": "line1\nline2\nline3"
}
```

### Q: 如何包含特殊字符？
A: 使用 JSON 轉義字符：
- `\"` 表示雙引號
- `\\` 表示反斜線
- `\t` 表示 Tab 字符

### Q: 模板 ID 的命名規則？
A: 使用 kebab-case 格式，例如：
- `hello-world`
- `for-loop-basic`
- `function-with-parameters`

### Q: 如何處理不同編碼的註解？
A: 支援 UTF-8 編碼，可以使用中文註解：
```javascript
// 這是中文註解
const message = "Hello, 世界!";
```

### Q: 可以創建自訂分類嗎？
A: 目前使用四個通用分類架構，適用於大多數程式語言。未來版本將支援更彈性的分類系統和語言特定分類。

### Q: 如何添加新的程式語言？
A: 1. 在 templates.json 中添加語言定義 2. 為每個分類創建代表性模板 3. 遵循該語言的最佳實踐 4. 測試模板的教學效果。

### Q: 如何匯出和分享模板？
A: 使用 Template Manager 的匯出功能：
1. 開啟 Template Manager
2. 選擇要匯出的語言或分類
3. 點擊 "匯出模板"
4. 保存 JSON 檔案進行分享

---

## 貢獻和反饋

歡迎為 TextBricks 貢獻高品質模板！

- **GitHub Issues**: [回報問題](https://github.com/timcsy/textbricks-extensions/issues)
- **Pull Requests**: 提交新模板或改進
- **Discord**: 加入社群討論最佳實踐

---

**製作團隊**：TextBricks 開發組  
**最後更新**：2025-08-31  
**版本**：v1.0

> **擴展性設計**：本指南設計為可擴展的，支援未來添加更多程式語言。每種語言都可以展示其獨特的優勢和特性，同時保持整體的一致性和可用性。